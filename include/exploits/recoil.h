#pragma once
#include <exploit.h>
#include <offsets.h>
#include <cache.h>
#include <ue4.h>
#include <config.h>

class NoRecoil : public Exploit<AItem_Gun_General*, RecoilStruct>
{
public:
	NoRecoil() : Exploit("No Recoil") { 
		this->GunUpRecoilOffset = get_offset("/Script/POLYGON.Item_Gun_General", "GunUpRecoil");
	};

	void read_data(RecoilStruct* buffer) override;

	RecoilStruct get_write_data() override { 
		return RecoilStruct(0, 0, 0, 0);
	};

	void write(AItem_Gun_General* object, RecoilStruct data) override;

	void* get_object_ptr() override {
		return cache::LocalCurrentWeapon;
	};

	bool* get_enabled_ptr() override {
		return &config::config->data()->no_recoil;
	}

private:
	uint64_t GunUpRecoilOffset;
};